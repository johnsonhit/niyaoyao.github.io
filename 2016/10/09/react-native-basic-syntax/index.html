<!DOCTYPE html>


  <html class="light page-post">


<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>React Native 基础 | N.Y.</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="Web,React Native,JavaScript," />
  

  <meta name="description" content="前言纵观软件开发模式的历史，从过去的 C/S 到 B/S，到如今移动互联网如春笋之势迅猛崛起，互联网的展示形态愈来愈多样化。然而，互联网形态不管以怎样形态示人，其本质仍然是服务端与客户端的数据通信。所以，一个 Web 就紧紧只能局限于网页吗？又或是，互联网软件工程的发展只能是移动终端的天下吗？
必然不是的。跨平台的需求，一直从未舍弃。而愈来愈多的跨平台框架，也火爆开发圈。除了 Facebook 的">
<meta property="og:type" content="article">
<meta property="og:title" content="React Native 基础">
<meta property="og:url" content="http://yoursite.com/2016/10/09/react-native-basic-syntax/index.html">
<meta property="og:site_name" content="N.Y.">
<meta property="og:description" content="前言纵观软件开发模式的历史，从过去的 C/S 到 B/S，到如今移动互联网如春笋之势迅猛崛起，互联网的展示形态愈来愈多样化。然而，互联网形态不管以怎样形态示人，其本质仍然是服务端与客户端的数据通信。所以，一个 Web 就紧紧只能局限于网页吗？又或是，互联网软件工程的发展只能是移动终端的天下吗？
必然不是的。跨平台的需求，一直从未舍弃。而愈来愈多的跨平台框架，也火爆开发圈。除了 Facebook 的">
<meta property="og:image" content="https://niyaoyao.github.io/images/qrcod_ny_1.jpg">
<meta property="og:updated_time" content="2017-05-07T15:52:21.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="React Native 基础">
<meta name="twitter:description" content="前言纵观软件开发模式的历史，从过去的 C/S 到 B/S，到如今移动互联网如春笋之势迅猛崛起，互联网的展示形态愈来愈多样化。然而，互联网形态不管以怎样形态示人，其本质仍然是服务端与客户端的数据通信。所以，一个 Web 就紧紧只能局限于网页吗？又或是，互联网软件工程的发展只能是移动终端的天下吗？
必然不是的。跨平台的需求，一直从未舍弃。而愈来愈多的跨平台框架，也火爆开发圈。除了 Facebook 的">
<meta name="twitter:image" content="https://niyaoyao.github.io/images/qrcod_ny_1.jpg">

  

  
    <link rel="icon" href="https://niyaoyao.github.io/images/avatar_ny.ico">
  

  <link href="/css/styles.css?v=c114cbe6" rel="stylesheet">


  
    <link rel="stylesheet" href="/css/personal-style.css">
  

  

  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?57e94d016e201fba3603a8a2b0263af0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  
  <script type="text/javascript">
	(function(){
	    var bp = document.createElement('script');
	    var curProtocol = window.location.protocol.split(':')[0];
	    if (curProtocol === 'https') {
	        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
	    }
	    else {
	        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	    }
	    var s = document.getElementsByTagName("script")[0];
	    s.parentNode.insertBefore(bp, s);
	})();
  </script>



  
    <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  

  
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  
</head>

<body>


  
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><span id="toolbox-mobile" class="toolbox-mobile">导航</span>
  

  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">导航</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/archives/"
            rel="noopener noreferrer"
            target="_self"
            >
            博客
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/category/"
            rel="noopener noreferrer"
            target="_self"
            >
            分类
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/tag/"
            rel="noopener noreferrer"
            target="_self"
            >
            标签
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/about/"
            rel="noopener noreferrer"
            target="_self"
            >
            关于
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#前言"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React-Native-基础语法"><span class="toc-text">React Native 基础语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#State-和-Props-简介"><span class="toc-text">State 和 Props 简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#属性"><span class="toc-text">属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#状态"><span class="toc-text">状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模块化"><span class="toc-text">模块化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Component-实践"><span class="toc-text">Component 实践</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义一个-Component"><span class="toc-text">自定义一个 Component</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Navigator-注意"><span class="toc-text">Navigator 注意</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#桥接"><span class="toc-text">桥接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#在-JS-文件中定义桥接模块"><span class="toc-text">在 JS 文件中定义桥接模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#在-JS-文件中使用模块方法"><span class="toc-text">在 JS 文件中使用模块方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建-Objective-C-程序文件"><span class="toc-text">创建 Objective-C 程序文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Debug"><span class="toc-text">Debug</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#报错整理"><span class="toc-text">报错整理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#React-Native-相关"><span class="toc-text">React Native 相关</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Native-报错"><span class="toc-text">Native 报错</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#node-服务错误"><span class="toc-text">node 服务错误</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#奇葩记录"><span class="toc-text">奇葩记录</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#函数引用"><span class="toc-text">函数引用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#方法绑定-this"><span class="toc-text">方法绑定 this</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#小结"><span class="toc-text">小结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考资料"><span class="toc-text">参考资料</span></a></li></ol>
  </div>



<div class="content content-post CENTER">
   <article id="post-react-native-basic-syntax" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">React Native 基础</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2016.10.09</span>
      </span>

      
        <span class="article-author">
          <i class="icon-user"></i>
          <span>Niyao</span>
        </span>
      

      
  <span class="article-category">
    <i class="icon-list"></i>
    <a class="article-category-link" href="/categories/Cross-platform/">Cross-platform</a>
  </span>



      
        <span>
          <i class="icon-comment"></i>
          <a href="http://www.niyao.space/2016/10/09/react-native-basic-syntax/#disqus_thread"></a>
        </span>
      

      
      <i class="fa fa-eye"></i> 
        <span id="busuanzi_container_page_pv">
           &nbsp热度 <span id="busuanzi_value_page_pv">
           <i class="fa fa-spinner fa-spin"></i></span>℃
        </span>
      

      
      
    </div>
  </header>

  <div class="article-content">
    
      <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>纵观软件开发模式的历史，从过去的 C/S 到 B/S，到如今移动互联网如春笋之势迅猛崛起，互联网的展示形态愈来愈多样化。然而，互联网形态不管以怎样形态示人，其本质仍然是服务端与客户端的数据通信。所以，一个 Web 就紧紧只能局限于网页吗？又或是，互联网软件工程的发展只能是移动终端的天下吗？</p>
<p>必然不是的。跨平台的需求，一直从未舍弃。而愈来愈多的跨平台框架，也火爆开发圈。除了 Facebook 的 React Native ，阿里巴巴也开源了自己研发的 weex ，结合 Vue.js 进行跨平台开发。而微信也开始做微信小应用这样的尝试。所以，现在要跟上潮流，打通任督二脉，探索未来应用开发的发展。</p>
<p>而在这么美好的大饼实现之前，必然是要先务实地学习如何使用这些开源轮子做开发。（以上自认真心扯）</p>
<p>本系列分为 React Native 、weex+Vue.js 、微信小应用三个开源框架的基础学习。希望对读者有用。</p>
<p>如果有需要交流，请见文末联系方式。</p>
<h2 id="React-Native-基础语法"><a href="#React-Native-基础语法" class="headerlink" title="React Native 基础语法"></a>React Native 基础语法</h2><p>本篇文章都以 ES6 语法规范为本。</p>
<h3 id="State-和-Props-简介"><a href="#State-和-Props-简介" class="headerlink" title="State 和 Props 简介"></a>State 和 Props 简介</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Props </div><div class="line">Most components can be customized when they are created, with different parameters. These creation parameters are called props.</div><div class="line"></div><div class="line">State </div><div class="line">There are two types of data that control a component: props and state. props are set by the parent and they are fixed throughout the lifetime of a component. For data that is going to change, we have to use state.</div></pre></td></tr></table></figure>
<p>Props<br>大部分组件创建时，可以由不同的参数进行自定义。这些创建的参数被称之为属性 props 。</p>
<h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Video</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> defaultProps = &#123;</div><div class="line">        <span class="attr">autoPlay</span>: <span class="literal">false</span>,</div><div class="line">        <span class="attr">maxLoops</span>: <span class="number">10</span>,</div><div class="line">    &#125;;  <span class="comment">// 注意这里有分号</span></div><div class="line">    <span class="keyword">static</span> propTypes = &#123;</div><div class="line">        <span class="attr">autoPlay</span>: React.PropTypes.bool.isRequired,</div><div class="line">        <span class="attr">maxLoops</span>: React.PropTypes.number.isRequired,</div><div class="line">        <span class="attr">posterFrameSrc</span>: React.PropTypes.string.isRequired,</div><div class="line">        <span class="attr">videoSrc</span>: React.PropTypes.string.isRequired,</div><div class="line">    &#125;;  <span class="comment">// 注意这里有分号</span></div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            <span class="xml"><span class="tag">&lt;<span class="name">View</span> /&gt;</span></span></div><div class="line">        );</div><div class="line">    &#125; // 注意这里既没有分号也没有逗号</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>其中，<strong>defaultProps</strong> 是为属性赋初始值，<strong>propTypes</strong> 是为属性赋予数据类型。<br>并且属于类的成员变量</p>
<h3 id="状态"><a href="#状态" class="headerlink" title="状态"></a>状态</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Video</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    state = &#123;</div><div class="line">        <span class="attr">loopsRemaining</span>: <span class="keyword">this</span>.props.maxLoops,</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>需要理解的是，props是一个父组件传递给子组件的数据流，这个数据流可以一直传递到子孙组件。而state代表的是一个组件内部自身的状态（可以是父组件、子孙组件）。<br>改变一个组件自身状态，从语义上来说，就是这个组件内部已经发生变化，有可能需要对此组件以及组件所包含的子孙组件进行重渲染。<br>而props是父组件传递的参数，可以被用于显示内容，或者用于此组件自身状态的设置（部分props可以用来设置组件的state），不仅仅是组件内部state改变才会导致重渲染，父组件传递的props发生变化，也会执行。<br>既然两者的变化都有可能导致组件重渲染，所以只有理解pros与state的意义，才能很好地决定到底什么时候用props或state<br>State<br>如果component的某些状态需要被改变，并且会影响到component的render，那么这些状态就应该用state表示。 例如：一个购物车的component，会根据用户在购物车中添加的产品和产品数量，显示不同的价格，那么“总价”这个状态，就应该用state表示。</p>
<p>Props<br>如果component的某些状态由外部所决定，并且会影响到component的render，那么这些状态就应该用props表示。 例如：一个下拉菜单的component，有哪些菜单项，是由这个component的使用者和使用场景决定的，那么“菜单项”这个状态，就应该用props表示，并且由外部传入。</p>
<h3 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h3><p>模块功能主要由两个命令构成： export 和 import 。 export 命令用于规定模块的对外接口，import 命令用于输入其他模块提供的功能。</p>
<ul>
<li>export 命令</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">如果 <span class="keyword">export</span> <span class="keyword">default</span> &#123;&#125; 定义，那么在文件中引入组件时 <span class="keyword">import</span> a <span class="keyword">from</span> <span class="string">'a'</span> </div><div class="line"></div><div class="line">如果 <span class="keyword">export</span> <span class="keyword">const</span> b = &#123;&#125; 定义，那么在文件中引入组件时 <span class="keyword">import</span> &#123; b &#125; <span class="keyword">from</span> <span class="string">'b'</span></div></pre></td></tr></table></figure>
<ul>
<li>export default 命令</li>
</ul>
<p>从前面的例子可以看出，使用 import 命令的时候，用户需要知道所要加载的变量名或函数名，否则无法加载。但是，用户肯定希望快速上手，未必愿意阅读文档，去了解模块有哪些属性和方法。</p>
<p>使用 export 命令定义了模块的对外接口以后，其他JS文件就可以通过import命令加载这个模块（文件）。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// constant-scene.js</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> kSceneWayBillMain = <span class="string">'ny.scene.waybill.main'</span>;</div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> kSceneWayBillPrePickupList = <span class="string">'ny.scene.waybill.prepickup'</span>;</div><div class="line"></div><div class="line"><span class="comment">// scene-login.js</span></div><div class="line"><span class="keyword">import</span> &#123;kSceneLogin, kSceneWayBillMain&#125; <span class="keyword">from</span> <span class="string">'./constant-scene'</span>;</div><div class="line"><span class="comment">// some code ...</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SaboRN</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(props) &#123;</div><div class="line">    <span class="keyword">super</span>(props);</div><div class="line">  &#125;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">var</span> route = <span class="literal">null</span>;</div><div class="line">    <span class="keyword">if</span> (AppContext.token == <span class="literal">null</span>) &#123;</div><div class="line">      route = &#123;<span class="attr">title</span>: <span class="string">'登录'</span>, <span class="attr">scene</span>: kSceneLogin&#125;;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">      route = &#123;<span class="attr">title</span>: <span class="string">'运单'</span>, <span class="attr">scene</span>: kSceneWayBillMain&#125;;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;Navigator</div><div class="line">        initialRoute=&#123;route&#125;</div><div class="line">        renderScene=&#123; this._renderScene.bind(this) &#125;</div><div class="line">      /&gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  _renderScene(route, navigator) &#123;</div><div class="line">    var scene = null;</div><div class="line">    if (route.scene == kSceneLogin) &#123;</div><div class="line">      scene = &lt;LoginScene navigator=&#123;navigator&#125; /&gt;</div><div class="line">    &#125; else &#123;</div><div class="line">      scene = &lt;MainScene navigator=&#123;navigator&#125; /&gt;</div><div class="line">    &#125;</div><div class="line">    return (</div><div class="line">      scene</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>以上代码就是在入口 js 文件中使用 constant-scene.js 定义的常量。</p>
<h2 id="Component-实践"><a href="#Component-实践" class="headerlink" title="Component 实践"></a>Component 实践</h2><h3 id="自定义一个-Component"><a href="#自定义一个-Component" class="headerlink" title="自定义一个 Component"></a>自定义一个 Component</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> &#123; View, TouchableOpacity,Text &#125; <span class="keyword">from</span> <span class="string">'react-native'</span>;</div><div class="line"><span class="keyword">import</span> &#123; SCREEN_HEIGHT, SCREEN_WIDTH &#125; <span class="keyword">from</span> <span class="string">'./constant-global-definition'</span>;</div><div class="line"></div><div class="line"><span class="keyword">let</span> lineHeight = <span class="number">0.25</span>;</div><div class="line"><span class="keyword">let</span> buttonHeight = <span class="number">50</span>;</div><div class="line"><span class="keyword">let</span> themeColor = <span class="string">'#FECE56'</span>;</div><div class="line"><span class="keyword">let</span> grayLight = <span class="string">'#EEEEEE'</span>;</div><div class="line"><span class="keyword">let</span> grayMiddle = <span class="string">'#999999'</span>;</div><div class="line"><span class="keyword">let</span> grayDark = <span class="string">'#666666'</span>;</div><div class="line"><span class="keyword">let</span> fontColor = <span class="string">'#333333'</span>;</div><div class="line"><span class="keyword">let</span> white = <span class="string">'#FFFFFF'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">Line</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="keyword">static</span> propTypes = &#123;</div><div class="line">    <span class="attr">left</span>: React.PropTypes.number.isRequired,</div><div class="line">    <span class="attr">top</span>: React.PropTypes.number.isRequired,</div><div class="line">    <span class="attr">width</span>: React.PropTypes.number.isRequired,</div><div class="line">    <span class="attr">height</span>: React.PropTypes.number,</div><div class="line">    <span class="attr">color</span>: React.PropTypes.string,</div><div class="line">  &#125;;</div><div class="line">  <span class="keyword">static</span> defaultProps = &#123;</div><div class="line">    <span class="attr">left</span>:<span class="number">0</span>,</div><div class="line">    <span class="attr">top</span>:<span class="number">0</span>,</div><div class="line">    <span class="attr">width</span>: SCREEN_WIDTH,</div><div class="line">    <span class="attr">height</span>: lineHeight,</div><div class="line">    <span class="attr">color</span>: grayLight,</div><div class="line">  &#125;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">let</span> left = <span class="keyword">this</span>.props.left;</div><div class="line">    <span class="keyword">let</span> top = <span class="keyword">this</span>.props.top;</div><div class="line">    <span class="keyword">let</span> width = <span class="keyword">this</span>.props.width;</div><div class="line">    <span class="keyword">let</span> height = <span class="keyword">this</span>.props.height;</div><div class="line">    <span class="keyword">let</span> color = <span class="keyword">this</span>.props.color;</div><div class="line"></div><div class="line">    <span class="keyword">return</span>(</div><div class="line">      <span class="xml"><span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;&#123;height:</span> <span class="attr">lineHeight</span>, <span class="attr">backgroundColor:</span> <span class="attr">color</span>, <span class="attr">width:</span> <span class="attr">width</span>, <span class="attr">marginLeft:</span> <span class="attr">left</span>, <span class="attr">marginTop:</span> <span class="attr">top</span>&#125;&#125; /&gt;</span></span></div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">export class CommonButton extends React.Component &#123;</div><div class="line">  static propTypes = &#123;</div><div class="line">    left: React.PropTypes.number.isRequired,</div><div class="line">    top: React.PropTypes.number.isRequired,</div><div class="line">    width: React.PropTypes.number.isRequired,</div><div class="line">    height: React.PropTypes.number,</div><div class="line">    title: React.PropTypes.string,</div><div class="line">    titleColor: React.PropTypes.string,</div><div class="line">    backgroundColor: React.PropTypes.string,</div><div class="line">    cornerRadius: React.PropTypes.number,</div><div class="line">  &#125;;</div><div class="line">  static defaultProps = &#123;</div><div class="line">    left:0,</div><div class="line">    top:0,</div><div class="line">    width: SCREEN_WIDTH,</div><div class="line">    buttonHeight: buttonHeight,</div><div class="line">    title: 'Button Title',</div><div class="line">    titleColor: white,</div><div class="line">    backgroundColor: themeColor,</div><div class="line">    buttonPressed: () =&gt; &#123;console.log('pressed'); return;&#125;,</div><div class="line">    cornerRadius: 5,</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render() &#123;</div><div class="line">    padding = this.props.cornerRadius;</div><div class="line">    var buttonStyle = &#123;</div><div class="line">      padding:padding,</div><div class="line">      marginTop: this.props.top,</div><div class="line">      marginLeft: this.props.left,</div><div class="line">      width: this.props.width,</div><div class="line">      height: this.props.buttonHeight,</div><div class="line">      backgroundColor: this.props.backgroundColor,</div><div class="line">      borderRadius : this.props.cornerRadius,</div><div class="line">    &#125;;</div><div class="line">    paddingEdge = 2 * padding;</div><div class="line">    var textStyle = &#123;</div><div class="line">      width: this.props.width - paddingEdge,</div><div class="line">      height: this.props.buttonHeight - paddingEdge,</div><div class="line">      lineHeight: this.props.buttonHeight - paddingEdge,</div><div class="line">      color: this.props.titleColor,</div><div class="line">      textAlign: 'center',</div><div class="line">      backgroundColor: this.props.backgroundColor,</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    return(</div><div class="line">      <span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;buttonStyle&#125;</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">TouchableOpacity</span> <span class="attr">onPress</span>=<span class="string">&#123;this.props.buttonPressed&#125;</span>&gt;</span></div><div class="line"></div><div class="line">          <span class="tag">&lt;<span class="name">Text</span> <span class="attr">style</span>=<span class="string">&#123;textStyle&#125;</span>&gt;</span>&#123;this.props.title&#125;<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">TouchableOpacity</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">View</span>&gt;</span></div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>以上就是定义了默认的一条线和另一个按钮的组件，并将这两个组件对外开放使用。其中，</p>
<h3 id="Navigator-注意"><a href="#Navigator-注意" class="headerlink" title="Navigator 注意"></a>Navigator 注意</h3><p>Navigator 并不是原生的 UINavigationController 。它是 React Native 自定的导航实例，但是可以根据 Navigator route 来判断当前的页面，并且父类可以通过 props 将 Navigator 传递给子类，并且由子类进行页面跳转的控制。上面的代码就是 Navigator 的初始化，而在子类中，获得 Navigator 则需要利用 props。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">_goToMain() &#123;</div><div class="line">  route = &#123;<span class="attr">title</span>:<span class="string">'运单'</span>, kSceneWayBillMain&#125;;</div><div class="line">  <span class="keyword">this</span>.props.navigator.push(route);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="桥接"><a href="#桥接" class="headerlink" title="桥接"></a>桥接</h2><p>原生代码和 JS 代码进行通信需要创建具体的 Module 类，并且，必须保证 JS 的模块名，和原生代码的类名保持一致，否则在应用运行时，将找不到模块而崩溃。</p>
<h3 id="在-JS-文件中定义桥接模块"><a href="#在-JS-文件中定义桥接模块" class="headerlink" title="在 JS 文件中定义桥接模块"></a>在 JS 文件中定义桥接模块</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; NativeModules &#125; <span class="keyword">from</span> <span class="string">'react-native'</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> RNBridgeModule = NativeModules.RNBridgeModule;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addEvent</span>(<span class="params">eventName, location</span>) </span>&#123;</div><div class="line">  RNBridgeModule.addEvent(eventName, location);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="在-JS-文件中使用模块方法"><a href="#在-JS-文件中使用模块方法" class="headerlink" title="在 JS 文件中使用模块方法"></a>在 JS 文件中使用模块方法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">import &#123; addEvent &#125; from &apos;./app-native-module&apos;</div><div class="line">// some code ...</div><div class="line">addEvent(&apos;aaa&apos;, &apos;bbb&apos;);</div></pre></td></tr></table></figure>
<p>注意，在定义桥接模块的时候，直接将 addEvent 方法对外暴露，所以直接使用方法即可。</p>
<h3 id="创建-Objective-C-程序文件"><a href="#创建-Objective-C-程序文件" class="headerlink" title="创建 Objective-C 程序文件"></a>创建 Objective-C 程序文件</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 头文件</span></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;RCTBridgeModule.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">RNBridgeModule</span> : <span class="title">NSObject</span> &lt;<span class="title">RCTBridgeModule</span>&gt;</span></div><div class="line"></div><div class="line">+ (<span class="keyword">void</span>)setup;</div><div class="line">+ (<span class="keyword">instancetype</span>)sharedManager;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="comment">// 实现文件</span></div><div class="line"><span class="meta">#import <span class="meta-string">"RNBridgeModule.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">RNBridgeModule</span></span></div><div class="line"></div><div class="line">+ (<span class="keyword">instancetype</span>)sharedManager &#123;</div><div class="line">    <span class="keyword">static</span> RNBridgeModule *manager = <span class="literal">nil</span>;</div><div class="line">    <span class="keyword">static</span> <span class="built_in">dispatch_once_t</span> onceToken;</div><div class="line">    <span class="built_in">dispatch_once</span>(&amp;onceToken, ^&#123;</div><div class="line">        manager = [[<span class="keyword">self</span> alloc] init];</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">return</span> manager;</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (<span class="keyword">void</span>)setup &#123;</div><div class="line">    [RNBridgeModule sharedManager];</div><div class="line">&#125;</div><div class="line"></div><div class="line">RCT_EXPORT_MODULE();</div><div class="line"></div><div class="line">RCT_EXPORT_METHOD(addEvent:(<span class="built_in">NSString</span> *)event location:(<span class="built_in">NSString</span> *)location) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@ %@"</span>, event, location);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<p>在头文件中需要引入 RCTBridgeModule 头文件，并且要遵循 RCTBridgeModule 协议。</p>
<p>实现文件中，必须写上 <strong>RCT_EXPORT_MODULE();</strong> 方法。</p>
<p><strong>In addition to implementing the RCTBridgeModule protocol, your class must also include the RCT_EXPORT_MODULE() macro. This takes an optional argument that specifies the name that the module will be accessible as in your JavaScript code (more on this later).</strong></p>
<p>然后，自定义自己的桥接函数。这样在原生调用的时候，就能跟踪到， JS 的模块方法之中。</p>
<h2 id="Debug"><a href="#Debug" class="headerlink" title="Debug"></a>Debug</h2><p>原生应用调试如果一直输出 log 会很难定位到具体代码，那么就开启 Remote Debug 比较好，然后利用 Chrome 的调试工具进行 JS 的调试。</p>
<h2 id="报错整理"><a href="#报错整理" class="headerlink" title="报错整理"></a>报错整理</h2><h3 id="React-Native-相关"><a href="#React-Native-相关" class="headerlink" title="React Native 相关"></a>React Native 相关</h3><ul>
<li>却少符号</li>
</ul>
<p>比如，结尾的}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[1] index.ios.js: Unexpected token (18:7)</div><div class="line">[2] SyntaxError /Users/niyao/N.Y./Demo/ny_native/ny_react/scene-login.js: Unexpected token, expected &#125; (47:28)</div></pre></td></tr></table></figure></p>
<ul>
<li>元素的属性（实例的方法，属性）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Unhandled JS Exception: Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. Check the render method of `Navigator`.</div></pre></td></tr></table></figure>
<ul>
<li>模块化的写法不对导致如下错误</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">Unable to resolve module login-view from /Users/niyao/N.Y./Demo/ny_native/ny_react/index.ios.js: Unable to find this module in its module map or any of the node_modules directories under /Users/node_modules/login-view and its parent directories</div><div class="line"></div><div class="line">This might be related to https://github.com/facebook/react-native/issues/4968</div><div class="line">To resolve try the following:</div><div class="line">  1. Clear watchman watches: `watchman watch-del-all`.</div><div class="line">  2. Delete the `node_modules` folder: `rm -rf node_modules &amp;&amp; npm install`.</div><div class="line">  3. Reset packager cache: `rm -fr $TMPDIR/react-*` or `npm start -- --reset-cache`.</div><div class="line">2016-11-10 16:39:58.732 [fatal][tid:main] Unable to resolve module login-view from /Users/niyao/N.Y./Demo/ny_native/ny_react/index.ios.js: Unable to find this module in its module map or any of the node_modules directories under /Users/node_modules/login-view and its parent directories</div><div class="line"></div><div class="line">This might be related to https://github.com/facebook/react-native/issues/4968</div><div class="line">To resolve try the following:</div><div class="line">  1. Clear watchman watches: `watchman watch-del-all`.</div><div class="line">  2. Delete the `node_modules` folder: `rm -rf node_modules &amp;&amp; npm install`.</div><div class="line">  3. Reset packager cache: `rm -fr $TMPDIR/react-*` or `npm start -- --reset-cache`.</div></pre></td></tr></table></figure>
<ul>
<li>JSX 没有结束</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SyntaxError /Users/niyao/N.Y./Demo/ny_native/ny_react/index.ios.js: Adjacent JSX elements must be wrapped in an enclosing tag (26:6)</div></pre></td></tr></table></figure>
<ul>
<li>JSX 的属性语法错误</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[fatal][tid:main] SyntaxError /Users/niyao/N.Y./Demo/ny_native/ny_react/index.ios.js: Unterminated JSX contents (41:47)</div></pre></td></tr></table></figure>
<ul>
<li>空对象</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Unhandled JS Exception: undefined is not a function (evaluating &apos;navigator.getCurrentRoutes(0)&apos;)</div></pre></td></tr></table></figure>
<ul>
<li>绑定 this</li>
</ul>
<p>在ES5下，React.createClass会把所有的方法都bind一遍，这样可以提交到任意的地方作为回调函数，而this不会变化。但官方现在逐步认为这反而是不标准、不易理解的。</p>
<p>在ES6下，你需要通过bind来绑定this引用，或者使用箭头函数（它会绑定当前scope的this引用）来调用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Unhandled JS Exception: undefined is not an object (evaluating &apos;this.props.navigator&apos;)</div></pre></td></tr></table></figure></p>
<p><a href="http://stackoverflow.com/questions/31304017/react-native-navigatorios-undefined-is-not-an-object-evaluating-this-props-n" target="_blank" rel="external">http://stackoverflow.com/questions/31304017/react-native-navigatorios-undefined-is-not-an-object-evaluating-this-props-n</a></p>
<h3 id="Native-报错"><a href="#Native-报错" class="headerlink" title="Native 报错"></a>Native 报错</h3><p>iOS 忘了设置 status bar 的 plist 属性<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[RCTStatusBarManager.m:118] RCTStatusBarManager module requires that the                 UIViewControllerBasedStatusBarAppearance key in the Info.plist is set to NO</div></pre></td></tr></table></figure></p>
<ul>
<li>state</li>
</ul>
<p>要传进状态对象，指定需要修改的 Key 的对象<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">Unhandled JS Exception: setState(...): takes an object of state variables to update or a function which returns an object of state variables.</div><div class="line">// wrong</div><div class="line">  addCount() &#123;</div><div class="line">    console.log(this.state.count);</div><div class="line">    this.setState(this.state.count+1);</div><div class="line">  &#125;</div><div class="line">// right</div><div class="line">  addCount() &#123;</div><div class="line">    console.log(this.state.count);</div><div class="line">    this.setState(&#123;count: this.state.count+1&#125;);</div><div class="line">  &#125;</div></pre></td></tr></table></figure></p>
<ul>
<li>RN CSS 样式出错</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div></pre></td><td class="code"><pre><div class="line">Unhandled JS Exception: &quot;lineHight&quot; is not a valid style property.</div><div class="line">StyleSheet inputStyle: &#123;</div><div class="line">  &quot;height&quot;: 44,</div><div class="line">  &quot;backgroundColor&quot;: &quot;#fff&quot;,</div><div class="line">  &quot;fontSize&quot;: 14,</div><div class="line">  &quot;lineHight&quot;: 44,</div><div class="line">  &quot;padding&quot;: 5</div><div class="line">&#125;</div><div class="line">Valid style props: [</div><div class="line">  &quot;alignItems&quot;,</div><div class="line">  &quot;alignSelf&quot;,</div><div class="line">  &quot;backfaceVisibility&quot;,</div><div class="line">  &quot;backgroundColor&quot;,</div><div class="line">  &quot;borderBottomColor&quot;,</div><div class="line">  &quot;borderBottomLeftRadius&quot;,</div><div class="line">  &quot;borderBottomRightRadius&quot;,</div><div class="line">  &quot;borderBottomWidth&quot;,</div><div class="line">  &quot;borderColor&quot;,</div><div class="line">  &quot;borderLeftColor&quot;,</div><div class="line">  &quot;borderLeftWidth&quot;,</div><div class="line">  &quot;borderRadius&quot;,</div><div class="line">  &quot;borderRightColor&quot;,</div><div class="line">  &quot;borderRightWidth&quot;,</div><div class="line">  &quot;borderStyle&quot;,</div><div class="line">  &quot;borderTopColor&quot;,</div><div class="line">  &quot;borderTopLeftRadius&quot;,</div><div class="line">  &quot;borderTopRightRadius&quot;,</div><div class="line">  &quot;borderTopWidth&quot;,</div><div class="line">  &quot;borderWidth&quot;,</div><div class="line">  &quot;bottom&quot;,</div><div class="line">  &quot;color&quot;,</div><div class="line">  &quot;decomposedMatrix&quot;,</div><div class="line">  &quot;elevation&quot;,</div><div class="line">  &quot;flex&quot;,</div><div class="line">  &quot;flexDirection&quot;,</div><div class="line">  &quot;flexWrap&quot;,</div><div class="line">  &quot;fontFamily&quot;,</div><div class="line">  &quot;fontSize&quot;,</div><div class="line">  &quot;fontStyle&quot;,</div><div class="line">  &quot;fontVariant&quot;,</div><div class="line">  &quot;fontWeight&quot;,</div><div class="line">  &quot;height&quot;,</div><div class="line">  &quot;justifyContent&quot;,</div><div class="line">  &quot;left&quot;,</div><div class="line">  &quot;letterSpacing&quot;,</div><div class="line">  &quot;lineHeight&quot;,</div><div class="line">  &quot;margin&quot;,</div><div class="line">  &quot;marginBottom&quot;,</div><div class="line">  &quot;marginHorizontal&quot;,</div><div class="line">  &quot;marginLeft&quot;,</div><div class="line">  &quot;marginRight&quot;,</div><div class="line">  &quot;marginTop&quot;,</div><div class="line">  &quot;marginVertical&quot;,</div><div class="line">  &quot;maxHeight&quot;,</div><div class="line">  &quot;maxWidth&quot;,</div><div class="line">  &quot;minHeight&quot;,</div><div class="line">  &quot;minWidth&quot;,</div><div class="line">  &quot;opacity&quot;,</div><div class="line">  &quot;overflow&quot;,</div><div class="line">  &quot;overlayColor&quot;,</div><div class="line">  &quot;padding&quot;,</div><div class="line">  &quot;paddingBottom&quot;,</div><div class="line">  &quot;paddingHorizontal&quot;,</div><div class="line">  &quot;paddingLeft&quot;,</div><div class="line">  &quot;paddingRight&quot;,</div><div class="line">  &quot;paddingTop&quot;,</div><div class="line">  &quot;paddingVertical&quot;,</div><div class="line">  &quot;position&quot;,</div><div class="line">  &quot;resizeMode&quot;,</div><div class="line">  &quot;right&quot;,</div><div class="line">  &quot;rotation&quot;,</div><div class="line">  &quot;scaleX&quot;,</div><div class="line">  &quot;scaleY&quot;,</div><div class="line">  &quot;shadowColor&quot;,</div><div class="line">  &quot;shadowOffset&quot;,</div><div class="line">  &quot;shadowOpacity&quot;,</div><div class="line">  &quot;shadowRadius&quot;,</div><div class="line">  &quot;textAlign&quot;,</div><div class="line">  &quot;textAlignVertical&quot;,</div><div class="line">  &quot;textDecorationColor&quot;,</div><div class="line">  &quot;textDecorationLine&quot;,</div><div class="line">  &quot;textDecorationStyle&quot;,</div><div class="line">  &quot;textShadowColor&quot;,</div><div class="line">  &quot;textShadowOffset&quot;,</div><div class="line">  &quot;textShadowRadius&quot;,</div><div class="line">  &quot;tintColor&quot;,</div><div class="line">  &quot;top&quot;,</div><div class="line">  &quot;transform&quot;,</div><div class="line">  &quot;transformMatrix&quot;,</div><div class="line">  &quot;translateX&quot;,</div><div class="line">  &quot;translateY&quot;,</div><div class="line">  &quot;width&quot;,</div><div class="line">  &quot;writingDirection&quot;,</div><div class="line">  &quot;zIndex&quot;</div><div class="line">]</div></pre></td></tr></table></figure>
<h3 id="node-服务错误"><a href="#node-服务错误" class="headerlink" title="node 服务错误"></a>node 服务错误</h3><p>目录错了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">NYSpace npm start</div><div class="line">npm ERR! Darwin 15.6.0</div><div class="line">npm ERR! argv &quot;/usr/local/Cellar/node/5.11.0/bin/node&quot; &quot;/usr/local/bin/npm&quot; &quot;start&quot;</div><div class="line">npm ERR! node v5.11.0</div><div class="line">npm ERR! npm  v3.8.7</div><div class="line"></div><div class="line">npm ERR! missing script: start</div></pre></td></tr></table></figure></p>
<p>端口占用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&gt; SaboRN@0.0.1 start /Users/niyao/Company/Projects/YouCaiDriver/Sabo/SaboRN</div><div class="line">&gt; node node_modules/react-native/local-cli/cli.js start</div><div class="line"></div><div class="line">Scanning 681 folders for symlinks in /Users/niyao/Company/Projects/YouCaiDriver/Sabo/SaboRN/node_modules (17ms)</div><div class="line"> ┌────────────────────────────────────────────────────────────────────────────┐ </div><div class="line"> │  Running packager on port 8081.                                            │ </div><div class="line"> │                                                                            │ </div><div class="line"> │  Keep this packager running while developing on any JS projects. Feel      │ </div><div class="line"> │  free to close this tab and run your own packager instance if you          │ </div><div class="line"> │  prefer.                                                                   │ </div><div class="line"> │                                                                            │ </div><div class="line"> │  https://github.com/facebook/react-native                                  │ </div><div class="line"> │                                                                            │ </div><div class="line"> └────────────────────────────────────────────────────────────────────────────┘ </div><div class="line">Looking for JS files in</div><div class="line">   /Users/niyao/Company/Projects/YouCaiDriver/Sabo/SaboRN </div><div class="line"></div><div class="line">[11:33:01 AM] &lt;START&gt; Building Dependency Graph</div><div class="line">[11:33:01 AM] &lt;START&gt; Crawling File System</div><div class="line"> ERROR  Packager can&apos;t listen on port 8081</div></pre></td></tr></table></figure></p>
<h2 id="奇葩记录"><a href="#奇葩记录" class="headerlink" title="奇葩记录"></a>奇葩记录</h2><p>###<br>StatusBar 必须在 render() 方法返回才能生效<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> &#123;</div><div class="line">  Dimensions,</div><div class="line">  Platform,</div><div class="line">  View,</div><div class="line">  ListView,</div><div class="line">  TextInput,</div><div class="line">  StyleSheet,</div><div class="line">  ScrollView,</div><div class="line">  Text,</div><div class="line">  RefreshControl,</div><div class="line">  Image,</div><div class="line">  ToolbarAndroid,</div><div class="line">  InteractionManager,</div><div class="line">  TouchableOpacity,</div><div class="line">  TouchableHighlight,</div><div class="line">  Linking,</div><div class="line">  StatusBar,</div><div class="line">&#125; <span class="keyword">from</span> <span class="string">'react-native'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginScene</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(props) &#123;</div><div class="line">    <span class="keyword">super</span>(props);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'login constructor'</span>);</div><div class="line">    <span class="keyword">this</span>.state = &#123;</div><div class="line">      <span class="attr">animated</span>: <span class="literal">false</span>,</div><div class="line">      <span class="attr">hidden</span>: <span class="literal">true</span>,</div><div class="line">      <span class="attr">showHideTransition</span>: <span class="string">'slide'</span>,</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span>(</div><div class="line">      &lt;View&gt;</div><div class="line">      &lt;StatusBar</div><div class="line">        hidden=&#123;true&#125;</div><div class="line">        showHideTransition=&#123;'slide'&#125;</div><div class="line">        animated=&#123;false&#125;</div><div class="line">        /&gt;</div><div class="line">      &lt;/View&gt;</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  renderStatusBar() &#123;</div><div class="line">    return(</div><div class="line">      &lt;StatusBar</div><div class="line">        hidden=&#123;this.state.hidden&#125;</div><div class="line">        showHideTransition=&#123;this.state.showHideTransition&#125;</div><div class="line">        animated=&#123;this.state.animated&#125;</div><div class="line">        /&gt;</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">var loginStyles = StyleSheet.create(&#123;</div><div class="line">  container: &#123;</div><div class="line">    flex: 1,</div><div class="line">    alignItems: 'center',</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h3 id="函数引用"><a href="#函数引用" class="headerlink" title="函数引用"></a>函数引用</h3><p>this.goToMain 相当于函数名的引用，this.goToMain() 则会在渲染之后直接执行<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;CommonButton left=&#123;kMargin&#125; top=&#123;<span class="number">80</span>&#125; width=&#123;kLineWidth&#125; title=<span class="string">'登录'</span> buttonPressed=&#123;<span class="keyword">this</span>.goToMain&#125; /&gt;</div></pre></td></tr></table></figure></p>
<h3 id="方法绑定-this"><a href="#方法绑定-this" class="headerlink" title="方法绑定 this"></a>方法绑定 this</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React,&#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> &#123;</div><div class="line">  View,</div><div class="line">  Text,</div><div class="line">  StyleSheet,</div><div class="line">&#125; <span class="keyword">from</span> <span class="string">'react-native'</span>;</div><div class="line"></div><div class="line"><span class="keyword">import</span> &#123; CommonButton &#125; <span class="keyword">from</span> <span class="string">'./custom-component'</span></div><div class="line"><span class="keyword">import</span> &#123; addEvent &#125; <span class="keyword">from</span> <span class="string">'./app-native-module'</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">MainScene</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(props) &#123;</div><div class="line">    <span class="keyword">super</span>(props);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span>(</div><div class="line">      <span class="xml"><span class="tag">&lt;<span class="name">View</span>&gt;</span></span></div><div class="line">      &#123;this.renderContent()&#125;</div><div class="line">      <span class="tag">&lt;/<span class="name">View</span>&gt;</span></div><div class="line">    );</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  renderContent() &#123;</div><div class="line">    <span class="keyword">return</span>(</div><div class="line">      &lt;View style=&#123;mainStyles.container&#125;&gt;</div><div class="line">        &lt;Text&gt;Main Scene&lt;/Text&gt;</div><div class="line">        &lt;CommonButton</div><div class="line">          title='登出'</div><div class="line">          buttonPressed=&#123;this._logout.bind(this)&#125;</div><div class="line">        /&gt;</div><div class="line"></div><div class="line">        &lt;CommonButton</div><div class="line">          top=&#123;30&#125;</div><div class="line">          title='Native 测试'</div><div class="line">          buttonPressed=&#123;this._addEvent.bind(this)&#125;</div><div class="line">         /&gt;</div><div class="line">      &lt;/View&gt;</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  _logout() &#123;</div><div class="line">    this.props.navigator.pop();</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  _addEvent() &#123;</div><div class="line">    addEvent('aaa', 'bbb');</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">var mainStyles = StyleSheet.create(&#123;</div><div class="line">  container: &#123;</div><div class="line">    flex: 1,</div><div class="line">    alignItems: 'center',</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>不绑定就会报错，具体原因见报错整理。<br>ren<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">This might be related to https://github.com/facebook/react-native/issues/4968</div><div class="line">To resolve try the following:</div><div class="line">  1. Clear watchman watches: `watchman watch-del-all`.</div><div class="line">  2. Delete the `node_modules` folder: `rm -rf node_modules &amp;&amp; npm install`.</div><div class="line">  3. Reset packager cache: `rm -fr $TMPDIR/react-*` or `npm start -- --reset-cache`.</div><div class="line">2016-11-25 15:35:23.465 [fatal][tid:main] Unable to resolve module react/lib/ReactUpdates from /Users/niyao/N.Y./Project/react-native-redux-app/ny_react/node_modules/react-native/Libraries/react-native/react-native.js: Unable to find this module in its module map or any of the node_modules directories under /Users/node_modules/react/lib/ReactUpdates and its parent directories</div><div class="line"></div><div class="line">This might be related to https://github.com/facebook/react-native/issues/4968</div><div class="line">To resolve try the following:</div><div class="line">  1. Clear watchman watches: `watchman watch-del-all`.</div><div class="line">  2. Delete the `node_modules` folder: `rm -rf node_modules &amp;&amp; npm install`.</div><div class="line">  3. Reset packager cache: `rm -fr $TMPDIR/react-*` or `npm start -- --reset-cache`.</div></pre></td></tr></table></figure></p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>本篇文章主要总结了，笔者在学习中认为重要的概念，以及开发过程中遇到的很奇葩的问题。<br>文章会不定期修改完善，如果有问题，或者有需修改的地方，可以联系我 yao.ni@ele.me</p>
<p>也非常欢迎关注我个人的微信公众号～</p>
<p><img src="https://niyaoyao.github.io/images/qrcod_ny_1.jpg" alt=""></p>
<p>并且自己也有</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="http://www.cnblogs.com/LuckyWinty/p/5309088.html" target="_blank" rel="external">http://www.cnblogs.com/LuckyWinty/p/5309088.html</a><br><a href="http://bbs.reactnative.cn/topic/15/react-react-native-%E7%9A%84es5-es6%E5%86%99%E6%B3%95%E5%AF%B9%E7%85%A7%E8%A1%A8" target="_blank" rel="external">http://bbs.reactnative.cn/topic/15/react-react-native-%E7%9A%84es5-es6%E5%86%99%E6%B3%95%E5%AF%B9%E7%85%A7%E8%A1%A8</a></p>

    
  </div>
  
  <!-- 根据页面mathjax变量决定是否加载MathJax数学公式js -->
  
</article>


   
  <div class="text-center donation">
    <div class="inner-donation">
      <span class="btn-donation">赞赏</span>
      <div class="donation-body">
        <div class="tip text-center">感谢支持～ 😘</div>
        <ul class="theme.donation.items.length">
        
          <li class="item">
            <img src="/images/qr-wechat.png" alt="">
          </li>
        
          <li class="item">
            <img src="/images/qr-alipay.png" alt="">
          </li>
        
        </ul>
      </div>
    </div>
  </div>


   
  <div class="box-prev-next clearfix">
    <a class="show pull-left" href="/2016/09/29/Learning-React-From-Today-D1/">
        <i class="icon icon-angle-left"></i>
    </a>
    <a class="show pull-right" href="/2016/10/16/Learning-Reverse-From-Today-D1/">
        <i class="icon icon-angle-right"></i>
    </a>
  </div>




</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">关闭</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/archives/"
              rel="noopener noreferrer"
              target="_self"
              >
              博客
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/category/"
              rel="noopener noreferrer"
              target="_self"
              >
              分类
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/tag/"
              rel="noopener noreferrer"
              target="_self"
              >
              标签
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/about/"
              rel="noopener noreferrer"
              target="_self"
              >
              关于
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    
  <section class="disqus-comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
  </section>

  <script>
    var disqus_shortname = 'N.Y.';
    
    var disqus_url = 'http://yoursite.com/2016/10/09/react-native-basic-syntax/';
    
    (function(){
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>

  <script id="dsq-count-scr" src="//N.Y..disqus.com/count.js" async></script>



    




    

    
	
  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</body>
</html>
