<!DOCTYPE html>


  <html class="light page-post">


<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>ä»Šå¤©å¼€å§‹å­¦é€†å‘ï¼šç”¨ Cycript è¿›è¡Œè¿è¡Œæ—¶åˆ†æåŠåº”ç”¨æ“ä½œ | N.Y.</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="iOS,Jail Break," />
  

  <meta name="description" content="å‰è¨€ä¸Šä¸€ç¯‡æ–‡ç« å·²ç»å­¦ä¹ äº†ä½¿ç”¨ SSH è¿æ¥è¶Šç‹±è®¾å¤‡ï¼Œä»¥åŠåˆ©ç”¨ Clutch, class-dump ç­‰å·¥å…·è¿›è¡Œç ¸å£³å’Œå¯¼å‡ºå¤´æ–‡ä»¶çš„æ“ä½œã€‚æœ¬ç¯‡æ–‡ç« ä¼šåœ¨ä¸Šä¸€ç¯‡æ–‡ç« çš„åŸºç¡€ä¸Šå†ä¸€ç‚¹è¿è¡Œæ—¶çš„åˆ†æï¼Œæ‰€ä»¥ï¼Œéœ€è¦å…ˆå¤ä¹ ä¸€ä¸‹åŠŸè¯¾å•¦ã€‚
Cycript è¿è¡Œæ—¶åˆ†æCycript å®˜ç½‘
ä»€ä¹ˆæ˜¯ CycriptCycript ç³…åˆäº† ES6ï¼Œ Objective-C++ ä¸ Java ç­‰è¯­æ³•é£æ ¼çš„è„šæœ¬è¯­è¨€ï¼Œæ˜¯ä½œä¸ºä¸€ä¸ª Cyc">
<meta property="og:type" content="article">
<meta property="og:title" content="ä»Šå¤©å¼€å§‹å­¦é€†å‘ï¼šç”¨ Cycript è¿›è¡Œè¿è¡Œæ—¶åˆ†æåŠåº”ç”¨æ“ä½œ">
<meta property="og:url" content="http://yoursite.com/2016/11/01/Learning-Reverse-From-Today-D2/index.html">
<meta property="og:site_name" content="N.Y.">
<meta property="og:description" content="å‰è¨€ä¸Šä¸€ç¯‡æ–‡ç« å·²ç»å­¦ä¹ äº†ä½¿ç”¨ SSH è¿æ¥è¶Šç‹±è®¾å¤‡ï¼Œä»¥åŠåˆ©ç”¨ Clutch, class-dump ç­‰å·¥å…·è¿›è¡Œç ¸å£³å’Œå¯¼å‡ºå¤´æ–‡ä»¶çš„æ“ä½œã€‚æœ¬ç¯‡æ–‡ç« ä¼šåœ¨ä¸Šä¸€ç¯‡æ–‡ç« çš„åŸºç¡€ä¸Šå†ä¸€ç‚¹è¿è¡Œæ—¶çš„åˆ†æï¼Œæ‰€ä»¥ï¼Œéœ€è¦å…ˆå¤ä¹ ä¸€ä¸‹åŠŸè¯¾å•¦ã€‚
Cycript è¿è¡Œæ—¶åˆ†æCycript å®˜ç½‘
ä»€ä¹ˆæ˜¯ CycriptCycript ç³…åˆäº† ES6ï¼Œ Objective-C++ ä¸ Java ç­‰è¯­æ³•é£æ ¼çš„è„šæœ¬è¯­è¨€ï¼Œæ˜¯ä½œä¸ºä¸€ä¸ª Cyc">
<meta property="og:image" content="https://niyaoyao.github.io/images/cycript_install.png">
<meta property="og:image" content="https://niyaoyao.github.io/images/mach_o_segments.gif">
<meta property="og:updated_time" content="2017-05-07T16:08:11.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ä»Šå¤©å¼€å§‹å­¦é€†å‘ï¼šç”¨ Cycript è¿›è¡Œè¿è¡Œæ—¶åˆ†æåŠåº”ç”¨æ“ä½œ">
<meta name="twitter:description" content="å‰è¨€ä¸Šä¸€ç¯‡æ–‡ç« å·²ç»å­¦ä¹ äº†ä½¿ç”¨ SSH è¿æ¥è¶Šç‹±è®¾å¤‡ï¼Œä»¥åŠåˆ©ç”¨ Clutch, class-dump ç­‰å·¥å…·è¿›è¡Œç ¸å£³å’Œå¯¼å‡ºå¤´æ–‡ä»¶çš„æ“ä½œã€‚æœ¬ç¯‡æ–‡ç« ä¼šåœ¨ä¸Šä¸€ç¯‡æ–‡ç« çš„åŸºç¡€ä¸Šå†ä¸€ç‚¹è¿è¡Œæ—¶çš„åˆ†æï¼Œæ‰€ä»¥ï¼Œéœ€è¦å…ˆå¤ä¹ ä¸€ä¸‹åŠŸè¯¾å•¦ã€‚
Cycript è¿è¡Œæ—¶åˆ†æCycript å®˜ç½‘
ä»€ä¹ˆæ˜¯ CycriptCycript ç³…åˆäº† ES6ï¼Œ Objective-C++ ä¸ Java ç­‰è¯­æ³•é£æ ¼çš„è„šæœ¬è¯­è¨€ï¼Œæ˜¯ä½œä¸ºä¸€ä¸ª Cyc">
<meta name="twitter:image" content="https://niyaoyao.github.io/images/cycript_install.png">

  

  
    <link rel="icon" href="https://niyaoyao.github.io/images/avatar_ny.ico">
  

  <link href="/css/styles.css?v=c114cbe6" rel="stylesheet">


  
    <link rel="stylesheet" href="/css/personal-style.css">
  

  

  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?57e94d016e201fba3603a8a2b0263af0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  
  <script type="text/javascript">
	(function(){
	    var bp = document.createElement('script');
	    var curProtocol = window.location.protocol.split(':')[0];
	    if (curProtocol === 'https') {
	        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
	    }
	    else {
	        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	    }
	    var s = document.getElementsByTagName("script")[0];
	    s.parentNode.insertBefore(bp, s);
	})();
  </script>



  
    <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  

  
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  
</head>

<body>


  
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><span id="toolbox-mobile" class="toolbox-mobile">å¯¼èˆª</span>
  

  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">å¯¼èˆª</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/archives/"
            rel="noopener noreferrer"
            target="_self"
            >
            åšå®¢
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/category/"
            rel="noopener noreferrer"
            target="_self"
            >
            åˆ†ç±»
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/tag/"
            rel="noopener noreferrer"
            target="_self"
            >
            æ ‡ç­¾
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/about/"
            rel="noopener noreferrer"
            target="_self"
            >
            å…³äº
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">æ–‡ç« ç›®å½•</strong>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#å‰è¨€"><span class="toc-text">å‰è¨€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Cycript-è¿è¡Œæ—¶åˆ†æ"><span class="toc-text">Cycript è¿è¡Œæ—¶åˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ä»€ä¹ˆæ˜¯-Cycript"><span class="toc-text">ä»€ä¹ˆæ˜¯ Cycript</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å®‰è£…-Cycript"><span class="toc-text">å®‰è£… Cycript</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ç©èµ·æ¥"><span class="toc-text">ç©èµ·æ¥</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Mach-O-æ–‡ä»¶"><span class="toc-text">Mach-O æ–‡ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å¯¼å‡ºå¤´æ–‡ä»¶"><span class="toc-text">å¯¼å‡ºå¤´æ–‡ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#åˆ©ç”¨-Cycript-è¿›è¡Œè¿è¡Œæ—¶åˆ†æ"><span class="toc-text">åˆ©ç”¨ Cycript è¿›è¡Œè¿è¡Œæ—¶åˆ†æ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Cycript-å…¶ä»–å§¿åŠ¿"><span class="toc-text">Cycript å…¶ä»–å§¿åŠ¿</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å°ç»“"><span class="toc-text">å°ç»“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å‚è€ƒèµ„æ–™"><span class="toc-text">å‚è€ƒèµ„æ–™</span></a></li></ol>
  </div>



<div class="content content-post CENTER">
   <article id="post-Learning-Reverse-From-Today-D2" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">ä»Šå¤©å¼€å§‹å­¦é€†å‘ï¼šç”¨ Cycript è¿›è¡Œè¿è¡Œæ—¶åˆ†æåŠåº”ç”¨æ“ä½œ</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2016.11.01</span>
      </span>

      
        <span class="article-author">
          <i class="icon-user"></i>
          <span>Niyao</span>
        </span>
      

      
  <span class="article-category">
    <i class="icon-list"></i>
    <a class="article-category-link" href="/categories/iOS-Reverse-Engineering/">iOS Reverse Engineering</a>
  </span>



      
        <span>
          <i class="icon-comment"></i>
          <a href="http://www.niyao.space/2016/11/01/Learning-Reverse-From-Today-D2/#disqus_thread"></a>
        </span>
      

      
      <i class="fa fa-eye"></i> 
        <span id="busuanzi_container_page_pv">
           &nbspçƒ­åº¦ <span id="busuanzi_value_page_pv">
           <i class="fa fa-spinner fa-spin"></i></span>â„ƒ
        </span>
      

      
      
    </div>
  </header>

  <div class="article-content">
    
      <h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä¸Šä¸€ç¯‡æ–‡ç« å·²ç»å­¦ä¹ äº†ä½¿ç”¨ SSH è¿æ¥è¶Šç‹±è®¾å¤‡ï¼Œä»¥åŠåˆ©ç”¨ Clutch, class-dump ç­‰å·¥å…·è¿›è¡Œç ¸å£³å’Œå¯¼å‡ºå¤´æ–‡ä»¶çš„æ“ä½œã€‚<br>æœ¬ç¯‡æ–‡ç« ä¼šåœ¨ä¸Šä¸€ç¯‡æ–‡ç« çš„åŸºç¡€ä¸Šå†ä¸€ç‚¹è¿è¡Œæ—¶çš„åˆ†æï¼Œæ‰€ä»¥ï¼Œéœ€è¦å…ˆå¤ä¹ ä¸€ä¸‹åŠŸè¯¾å•¦ã€‚</p>
<h2 id="Cycript-è¿è¡Œæ—¶åˆ†æ"><a href="#Cycript-è¿è¡Œæ—¶åˆ†æ" class="headerlink" title="Cycript è¿è¡Œæ—¶åˆ†æ"></a>Cycript è¿è¡Œæ—¶åˆ†æ</h2><p><a href="http://www.cycript.org/" target="_blank" rel="external">Cycript å®˜ç½‘</a></p>
<h3 id="ä»€ä¹ˆæ˜¯-Cycript"><a href="#ä»€ä¹ˆæ˜¯-Cycript" class="headerlink" title="ä»€ä¹ˆæ˜¯ Cycript"></a>ä»€ä¹ˆæ˜¯ Cycript</h3><p>Cycript ç³…åˆäº† ES6ï¼Œ Objective-C++ ä¸ Java ç­‰è¯­æ³•é£æ ¼çš„è„šæœ¬è¯­è¨€ï¼Œæ˜¯ä½œä¸ºä¸€ä¸ª Cycript-to-JavaScript ç¼–è¯‘å™¨çš„å®ç°ï¼Œå¹¶ä¸”ä½¿ç”¨äº†ï¼ˆæœªä¿®æ”¹ï¼‰çš„ JavaScript å†…æ ¸ä½œä¸ºå…¶è™šæ‹Ÿæœºã€‚Cycript ä¸»è¦è¢«ç”¨äº iOS çš„é€†å‘å·¥ç¨‹ã€‚</p>
<h3 id="å®‰è£…-Cycript"><a href="#å®‰è£…-Cycript" class="headerlink" title="å®‰è£… Cycript"></a>å®‰è£… Cycript</h3><p>è¶Šç‹±è®¾å¤‡å®‰è£… Cycript å¯ä»¥åœ¨å®˜ç½‘ä¸‹è½½ SDKï¼Œç„¶åå†æ¨é€åˆ°è¶Šç‹±è®¾å¤‡ä¸Šã€‚ä½†æ¯”è¾ƒæ–¹ä¾¿çš„æ–¹æ³•æ˜¯åœ¨ Cydia é‡Œæœç´¢å¹¶ä¸‹è½½ã€‚</p>
<p><img src="https://niyaoyao.github.io/images/cycript_install.png" alt=""></p>
<h3 id="ç©èµ·æ¥"><a href="#ç©èµ·æ¥" class="headerlink" title="ç©èµ·æ¥"></a>ç©èµ·æ¥</h3><p>ä¸Šä¸€ç¯‡è¯´åˆ°ä» App Store ä¸‹è½½åº”ç”¨éƒ½æ˜¯ç»è¿‡ç­¾ååŠ å¯†çš„ï¼Œå¹¶ä¸”åˆ©ç”¨ Clutch ç ¸å£³å¾—åˆ°è§£å¯†åçš„ ipa åŒ…ï¼Œé‚£è¿™æ¬¡è¯•ä¸€ä¸‹åœ¨åŠ©æ‰‹å¸‚åœºä¸‹è½½åº”ç”¨è¿›è¡Œå¤´æ–‡ä»¶å¯¼å‡ºçš„æ“ä½œã€‚<br>ä»¥ç¾å›¾ç§€ç§€ä¸ºä¾‹ï¼Œåœ¨åŠ©æ‰‹å¸‚åœºä¸‹è½½ä¹‹åè¿›å…¥åº”ç”¨å­˜å‚¨ç›®å½•ï¼ŒæŸ¥æ‰¾ç¾å›¾ç§€ç§€å­˜å‚¨çš„ç›®å½•ã€‚</p>
<p>iOS å¸¸ç”¨çš„æ–‡ä»¶ç›®å½•ï¼š</p>
<ul>
<li>home ~ ç›®å½• /var/root</li>
<li>åº”ç”¨å­˜å‚¨ç›®å½• /var/mobile/Containers/Bundle/Application</li>
<li>ç…§ç‰‡å­˜å‚¨ç›®å½• /private/var/mobile/Media/DCIM</li>
<li>å‘½ä»¤å­˜å‚¨ç›®å½• /usr/bin</li>
</ul>
<p>è¿›å…¥ <strong>/var/mobile/Containers/Bundle/Application</strong> ç›®å½•ï¼Œls å­ç›®å½•ï¼Œæ‰¾åˆ°ç¾å›¾ç§€ç§€çš„å­˜å‚¨ä½ç½®ã€‚<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">NY:/var/mobile/Containers/Bundle/Application root<span class="comment"># ls 8D71E631-48D6-4FE6-A8BE-5394AD898DD7/</span></div><div class="line">MTXX.app/  iTunesMetadata.plist</div></pre></td></tr></table></figure></p>
<h4 id="Mach-O-æ–‡ä»¶"><a href="#Mach-O-æ–‡ä»¶" class="headerlink" title="Mach-O æ–‡ä»¶"></a>Mach-O æ–‡ä»¶</h4><p><img src="https://niyaoyao.github.io/images/mach_o_segments.gif" alt=""></p>
<p>ç›´æ¥è¿›å…¥ MTXX.app ç›®å½•ä¸‹ï¼Œå°†äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ <strong>MTXX</strong> ç›´æ¥ scp æ¨åˆ° Mac ä¸Šã€‚<br>åœ¨ OS X å’Œ iOS æ“ä½œç³»ç»Ÿä¸‹çš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ä¸º Mach-O æ–‡ä»¶ï¼Œå¯ä»¥åˆ©ç”¨ otool å‘½ä»¤æŸ¥çœ‹ã€‚</p>
<ul>
<li>æŸ¥çœ‹ Mach-O å¤´</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">âœ  Reverse otool -h MTXX</div><div class="line">Mach header</div><div class="line">      magic cputype cpusubtype  caps    filetype ncmds sizeofcmds      flags</div><div class="line"> 0xfeedface      12          9  0x00           2    61       6368 0x00218085</div><div class="line">Mach header</div><div class="line">      magic cputype cpusubtype  caps    filetype ncmds sizeofcmds      flags</div><div class="line"> 0xfeedfacf 16777228          0  0x00           2    61       7104 0x00218085</div></pre></td></tr></table></figure>
<p>Mach-O ä¸º Mach Object æ–‡ä»¶æ ¼å¼çš„ç¼©å†™ï¼Œå®ƒæ˜¯ä¸€ç§ç”¨äºå¯æ‰§è¡Œæ–‡ä»¶ï¼Œç›®æ ‡ä»£ç ï¼ŒåŠ¨æ€åº“ï¼Œå†…æ ¸è½¬å‚¨çš„æ–‡ä»¶æ ¼å¼ã€‚ä½œä¸ºa.outæ ¼å¼çš„æ›¿ä»£ï¼ŒMach-O æä¾›äº†æ›´å¼ºçš„æ‰©å±•æ€§ï¼Œå¹¶æå‡äº†ç¬¦å·è¡¨ä¸­ä¿¡æ¯çš„è®¿é—®é€Ÿåº¦ã€‚</p>
<p>ä¸€ä¸ª Mach-O æ–‡ä»¶åŒ…å«ä¸‰ä¸ªæœ€ä¸»è¦çš„éƒ¨åˆ†ï¼š</p>
<ul>
<li>åœ¨æ¯ä¸ª Mach-O æ–‡ä»¶çš„å¼€å¤´æ˜¯ Header ï¼Œç”¨æ¥æ ‡è¯†è¿™ä¸ªæ–‡ä»¶æ˜¯ Mach-O æ–‡ä»¶ã€‚ Header ä¹ŸåŒ…å«å…¶ä»–åŸºç¡€æ–‡ä»¶ç±»å‹çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼Œç›®æ ‡æ¶æ„ï¼Œä»¥åŠé‚£äº›å½±å“è¯¥æ–‡ä»¶çš„å‰©ä½™éƒ¨åˆ†çš„ä¸€äº›ç‰¹å®šé€‰é¡¹çš„æ ‡å¿—ã€‚<br>ç´§æ¥ Header ä¹‹åçš„æ˜¯ Load commands ï¼Œä¸€ç³»åˆ—ä¸å®šé•¿çš„åŠ è½½å‘½ä»¤ã€‚è¿™äº›åŠ è½½å‘½ä»¤å…·ä½“è¯´æ˜äº† Mach-O æ–‡ä»¶çš„å¸ƒå±€å’Œè”ç³»ç‰¹å¾ã€‚</li>
<li>åœ¨ Load commands ä¹‹åï¼Œæ˜¯ Data ã€‚Data åŒ…æ¶µä¸€ä¸ªæˆ–å¤šä¸ª segment ï¼Œæ¯ä¸ª segment åŒ…å«é›¶ä¸ªæˆ–å¤šä¸ª section ã€‚æ¯ä¸ª section åŒ…å«ä»£ç æˆ–ç‰¹å®šç±»å‹çš„æ•°æ®ã€‚æ¯ä¸ª segment å®šä¹‰äº†ä¸€ä¸ªè™šæ‹Ÿå†…å­˜åœ°å€åç§»é‡çš„åŒºåŸŸï¼Œä»è€Œï¼ŒåŠ¨æ€é“¾æ¥å°†å…¶æ˜ å°„åˆ°è¿›ç¨‹çš„åœ°å€ç©ºé—´ã€‚</li>
<li><p>åœ¨ç”¨æˆ·çº§å…¨é“¾æ¥çš„ Mach-O æ–‡ä»¶ä¸­ï¼Œæœ€åä¸€ä¸ª segment æ˜¯ link edit ï¼ˆé“¾æ¥å™¨ï¼‰æ®µã€‚è¿™ä¸ªæ®µåŒ…å«äº†é“¾æ¥å™¨ä¿¡æ¯è¡¨ï¼Œæ¯”å¦‚ï¼Œç¬¦å·è¡¨ã€å­—ç¬¦ä¸²è¡¨ç­‰ï¼Œè¢«åŠ¨æ€é“¾æ¥å™¨é“¾æ¥åˆ°å®ƒæ‰€ä¾èµ–çš„åº“çš„ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶æˆ– Mach-O æ–‡ä»¶çš„ bundleã€‚<br>å¾—åˆ° Mach-O</p>
</li>
<li><p>æŸ¥çœ‹ Segment å’Œ Section</p>
</li>
</ul>
<p>å¯ä»¥åˆ©ç”¨ size æŸ¥çœ‹ Mach-O æ–‡ä»¶çš„ Segment å’Œ Section<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">size <span class="_">-l</span> -x -m MTXX</div></pre></td></tr></table></figure></p>
<ul>
<li>æŸ¥çœ‹ç¬¦å·è¡¨åŠå¯¹åº”çš„åŠ¨æ€é“¾æ¥åº“</li>
</ul>
<p>åˆ©ç”¨ nm å‘½ä»¤æŸ¥çœ‹ Mach-O çš„ç¬¦å·å<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nm -nm MTXX</div></pre></td></tr></table></figure></p>
<p>ä»¥ä¸Šå‘½ä»¤çš„è¾“å‡ºæ¯”è¾ƒå¤šï¼Œå°±ä¸å¤åˆ¶ç²˜è´´äº†ã€‚</p>
<h4 id="å¯¼å‡ºå¤´æ–‡ä»¶"><a href="#å¯¼å‡ºå¤´æ–‡ä»¶" class="headerlink" title="å¯¼å‡ºå¤´æ–‡ä»¶"></a>å¯¼å‡ºå¤´æ–‡ä»¶</h4><p>ç»“åˆä¸Šä¸€ç¯‡æ–‡ç« çš„å†…å®¹ï¼Œå¯¼å‡ºå¤´æ–‡ä»¶</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">class-dump MTXX &gt; MTXX.h</div></pre></td></tr></table></figure>
<h4 id="åˆ©ç”¨-Cycript-è¿›è¡Œè¿è¡Œæ—¶åˆ†æ"><a href="#åˆ©ç”¨-Cycript-è¿›è¡Œè¿è¡Œæ—¶åˆ†æ" class="headerlink" title="åˆ©ç”¨ Cycript è¿›è¡Œè¿è¡Œæ—¶åˆ†æ"></a>åˆ©ç”¨ Cycript è¿›è¡Œè¿è¡Œæ—¶åˆ†æ</h4><ul>
<li>è·å¾—è¿›ç¨‹ PID</li>
</ul>
<p>åœ¨è¶Šç‹±è®¾å¤‡ä¸­å¼€å¯ç¾å›¾ç§€ç§€ï¼Œå¹¶åˆ‡å›åˆ°è¶Šç‹±è®¾å¤‡çš„ç»ˆç«¯ï¼Œæ‰¾åˆ°ç¾å›¾ç§€ç§€çš„è¿›ç¨‹ç¼–å· PIDã€‚</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">NY:~ root<span class="comment"># ps aux | grep "MTXX"</span></div><div class="line">mobile     949   3.9  3.3   737672  34540   ??  Ss    6:28PM   0:03.82 /var/mobile/Containers/Bundle/Application/8D71E631-48D6-4FE6-A8BE-5394AD898DD7/MTXX.app/MTXX</div><div class="line">root       956   3.3  0.0   536256    456 s000  R+    6:28PM   0:00.01 grep MTXX</div></pre></td></tr></table></figure>
<p>æ‰¾åˆ° mobile å¯¹åº”çš„ PID 949ï¼Œä¹‹ååˆ©ç”¨ Cycript è¿›è¡Œè¿è¡Œæ—¶åˆ†æ</p>
<ul>
<li>ä½¿ç”¨ Cycript </li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">NY:~ root<span class="comment"># cycript -help</span></div><div class="line">cycript: invalid option -- h</div><div class="line">usage: cycript [-c] [-p &lt;pid|name&gt;] [-r &lt;host:port&gt;] [&lt;script&gt; [&lt;arg&gt;...]]</div><div class="line">NY:~ root<span class="comment"># cycript -p 949</span></div></pre></td></tr></table></figure>
<p>å¯ä»¥çŸ¥é“åªè¦åŠ ä¸Š -p é€‰é¡¹å³å¯è¿›å…¥ Cycript çš„è¿è¡ŒçŠ¶æ€ã€‚<br>Cycript æ¢è¡Œä¸å¤ªæ–¹ä¾¿ï¼Œç›´æ¥è¾“å…¥å›è½¦é”®ä¼šç«‹å³æ‰§è¡Œè„šæœ¬ã€‚æ‰€ä»¥ï¼Œæˆ‘é‡‡ç”¨å¤šä¸ªç©ºæ ¼æ¥å®ç°æ¢è¡Œã€‚</p>
<ul>
<li>ç¾å›¾ç§€ç§€è¿è¡Œæ—¶åˆ†æ</li>
</ul>
<p>ç»“åˆå·²ç»å¾—åˆ°çš„å¤´æ–‡ä»¶ï¼Œæ‰¾åˆ°å¤´æ–‡ä»¶ä¸­çš„ç±»ä»¥åŠè¯¥ç±»å¯¹åº”çš„æ–¹æ³•ï¼Œå°è¯•ä½¿ç”¨ Cycript æ‰§è¡Œè¿™äº›æ–¹æ³•ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">cy# var delegate = UIApp.delegate</div><div class="line">cy# var window = delegate.window</div><div class="line">#&quot;&lt;UIWindow: 0x14e64a00; frame = (0 0; 320 568); autoresize = W+H; gestureRecognizers = &lt;NSArray: 0x14e64ed0&gt;; layer = &lt;UIWindowLayer: 0x14e63ab0&gt;&gt;&quot;</div><div class="line">cy# var rootViewController = window.rootViewController</div><div class="line">#&quot;&lt;UINavigationController: 0x14e5fff0&gt;&quot;</div><div class="line">cy# var childVC = rootViewController.childViewControllers</div><div class="line">@[#&quot;&lt;HomeViewController: 0x14d8c3e0&gt;&quot;]</div><div class="line">cy# var homeVC = [childVC firstObject]</div><div class="line">#&quot;&lt;HomeViewController: 0x14d8c3e0&gt;&quot;</div><div class="line">cy# [homeVC pullDownToCamera]</div><div class="line">cy# [[[UIAlertView alloc] initWithTitle:@&quot;Cycript Test&quot; message:@&quot;Runtime Modify&quot; delegate:ni cancelButtonTitle:@&quot;Done&quot; otherButtonTitles:nil, nil] show]</div></pre></td></tr></table></figure></p>
<p>åœ¨ App çš„è¿è¡Œæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œå·²æœ‰çš„æ–¹æ³•ï¼Œæ¯”å¦‚ï¼Œåœ¨çª—å£ä¸Šå¼¹å‡ºä¸€ä¸ª UIAlertView ã€‚<br>å†æ¯”å¦‚ï¼Œä» MTXX.h ä¸­æŸ¥æ‰¾åˆ° HomeViewController æœ‰ pullDownToCamera çš„å®ä¾‹æ–¹æ³•ã€‚å½“è°ƒç”¨ pullDownToCamera æ–¹æ³•æ—¶ï¼Œæ‰‹æœºå±å¹•å°±ä¼šå¼¹å‡ºç…§ç›¸æœºçš„ç•Œé¢ã€‚<br>å› æ­¤ï¼Œé€šè¿‡è°ƒç”¨å¯¼å‡ºçš„å¤´æ–‡ä»¶ä¸­æ–¹æ³•ï¼Œå¹¶æ ¹æ®åº”ç”¨è¿è¡Œæ—¶çš„è¡¨ç°ï¼Œå°±å¯ä»¥å¤§æ¦‚æƒ³è±¡å‡ºåº”ç”¨çš„åŸºæœ¬ç»“æ„ã€‚</p>
<h4 id="Cycript-å…¶ä»–å§¿åŠ¿"><a href="#Cycript-å…¶ä»–å§¿åŠ¿" class="headerlink" title="Cycript å…¶ä»–å§¿åŠ¿"></a>Cycript å…¶ä»–å§¿åŠ¿</h4><ul>
<li>åº”ç”¨ä»£ç†</li>
</ul>
<p>åœ¨ Cycript ä¸­ UIApp ä¸ [UIApplication sharedApplication] ä½œç”¨ç›¸åŒ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">NY:~ root# cycript -p SpringBoard</div><div class="line">cy# UIApp</div><div class="line">#&quot;&lt;SpringBoard: 0x148aa400&gt;&quot;</div><div class="line">cy# [UIApplication sharedApplication]</div><div class="line">#&quot;&lt;SpringBoard: 0x148aa400&gt;&quot;</div></pre></td></tr></table></figure></p>
<ul>
<li>åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var delegate = new Instance(0x148aa400)</div></pre></td></tr></table></figure>
<ul>
<li>è·å¾—å¯¹è±¡çš„ ivar</li>
</ul>
<p>ivar(instance variable) å³å¯¹è±¡çš„å®ä¾‹å˜é‡ï¼Œä»¥ä¸Šé¢çš„ delegate ä¸ºä¾‹ï¼Œdelegate çš„å®ä¾‹å˜é‡ä¸º<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cy# var delegate = new Instance(0x148aa400)</div><div class="line">#&quot;&lt;SpringBoard: 0x148aa400&gt;&quot;</div><div class="line">cy# *delegate</div><div class="line">&#123;isa:SpringBoard,_delegate:#&quot;&lt;SpringBoard: 0x148aa400&gt;&quot;,_exclusiveTouchWindows:[NSSet setWithArray:@[]]],_event:#&quot;&lt;UIInternalEvent: 0x145aeff0&gt;&quot;,_touchesEvent:#&quot;&lt;UITouchesEvent: 0x145af0f0&gt; timestamp: 0 touches: &#123;(\n)&#125;&quot;,_motionEvent:#&quot;&lt;UIMotionEvent: 0x145952b0&gt; timestamp: 0 subtype: 0&quot;,_remoteControlEvent:#&quot;&lt;UIRemoteControlEvent: 0x146ab470&gt;&quot;,_remoteControlEventObservers:0,_topLevelNibObjects:null,_networkResourcesCurrentlyLoadingCount:0,_hideNetworkActivityIndicatorTimer:null,_editAlertView:null,_statusBar:#&quot;&lt;UIStatusBar: 0x148c0800; frame = (0 0; 320 24); opaque = NO; autoresize = W+BM; userInteractionEnabled = NO; layer = &lt;CALayer: 0x145a78d0&gt;&gt;&quot;,_statusBarRequestedStyle:306,_statusBarWindow:#&quot;&lt;UIStatusBarWindow: 0x146f51f0; frame = (0 0; 320 568); opaque = NO; gestureRecognizers = &lt;NSArray: 0x146a63c0&gt;; layer = &lt;UIWindowLayer: 0x146eabe0&gt;&gt;&quot;,_observerBlocks:@[],_postCommitActions:@[],_mainStoryboardName:null,_tintViewDurationStack:@[],_statusBarTintColorLockingControllers:null,_statusBarTintColorLockingCount:0,_preferredContentSizeCategory:null,_applicationFlags:@error,_defaultTopNavBarTintColor:null,_undoButtonIndex:0,_redoButtonIndex:0,_moveEvent:#&quot;&lt;UIMoveEvent: 0x146d9590&gt;&quot;,_physicalButtonsEvent:#&quot;&lt;UIPhysicalButtonsEvent: 0x146b1240&gt;&quot;,_wheelEvent:#&quot;&lt;UIWheelEvent: 0x146e0600&gt;&quot;,_physicalButtonMap:@&#123;101:#&quot;&lt;_UIPhysicalButton: 0x15c89a10&gt;&quot;,104:#&quot;&lt;_UIPhysicalButton: 0x147d0280&gt;&quot;&#125;,_physicalKeyboardEvent:#&quot;&lt;UIPhysicalKeyboardEvent: 0x146a7570&gt;&quot;,_alwaysHitTestsForMainScreen:0,_backgroundHitTestWindow:null,_eventQueue:@[],_childEventMap:&amp;&#123;&#125;,_disableTouchCoalescingCount:0,_classicMode:0,_actionsPendingInitialization:null,_idleTimerDisabledReasons:@error,_currentTimestampWhenFirstTouchCameDown:0,_currentLocationWhereFirstTouchCameDown:&#123;x:0,y:0&#125;,_currentActivityUUID:null,_currentActivityType:null,_sceneSettingsDiffInspector:#&quot;&lt;UIApplicationSceneSettingsDiffInspector:0x1459ef50&gt; -&gt; &lt;BSMutableSettings:0x14572e70&gt; -&gt; &#123;\n\t(7) = &lt;BSMutableSettings:0x1459f7b0&gt; -&gt; &#123;\n\t(2) = (\n    \&quot;&lt;__NSMallocBlock__: 0x145a5b90&gt;\&quot;\n)\n&#125;\</div></pre></td></tr></table></figure></p>
<p>å³ï¼Œè·å¾—å¯¹è±¡çš„å®ä¾‹å˜é‡æ–¹æ³•æ˜¯ï¼Œç›´æ¥è¾“å…¥ &lt;*å¯¹è±¡å&gt; ã€‚</p>
<ul>
<li>æ‰“å°å¯¹è±¡æ–¹æ³•</li>
</ul>
<p>å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç±»å<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">function printMethods(className, isa) &#123;</div><div class="line">  var count = new new Type(&quot;I&quot;);</div><div class="line">  var classObj = (isa != undefined) ? objc_getClass(className)-&gt;isa : objc_getClass(className);</div><div class="line">  var methods = class_copyMethodList(classObj, count);</div><div class="line">  var methodsArray = [];</div><div class="line">  for(var i = 0; i &lt; *count; i++) &#123;</div><div class="line">    var method = methods[i];</div><div class="line">    methodsArray.push(&#123;selector:method_getName(method), implementation:method_getImplementation(method)&#125;);</div><div class="line">  &#125;</div><div class="line">  free(methods);</div><div class="line">  return methodsArray;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ç”¨æ³•å¦‚ä¸‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cy# printMethods(&quot;NSRunLoop&quot;, true)</div><div class="line">[&#123;selector:@selector(_mapkit_networkIORunLoop),implementation:&amp;(extern &quot;C&quot; id 629301593(id, SEL, ...))&#125;,&#123;selector:@selector(set_mapkit_networkIORunLoop:),implementation:&amp;(extern &quot;C&quot; id 629301645(id, SEL, ...))&#125;,&#123;selector:@selector(_new:),implementation:&amp;(extern &quot;C&quot; id 617824525(id, SEL, ...))&#125;,&#123;selector:@selector(currentRunLoop),implementation:&amp;(extern &quot;C&quot; id 617612889(id, SEL, ...))&#125;,&#123;selector:@selector(mainRunLoop),implementation:&amp;(extern &quot;C&quot; id 617895681(id, SEL, ...))&#125;]</div></pre></td></tr></table></figure></p>
<ul>
<li>Hook æ–¹æ³•</li>
</ul>
<p>ç³»ç»Ÿé»˜è®¤çš„ currentRunLoop ä¼šè¿”å› CFRunLoop å®ä¾‹çš„è¯¦ç»†æè¿°ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cy# [NSRunLoop currentRunLoop]</div><div class="line">#&quot;&lt;CFRunLoop 0x14698f50 [0x321be700]&gt;&#123;wakeup port = 0x1403, stopped = false, ignoreWakeUps = false, \ncurrent mode = kCFRunLoopDefaultMode,\ncommon modes = &lt;CFBasicHash 0x14698fd0 [0x321be700]&gt;&#123;type = mutable set, count = 2,\nentries =&gt;\n\t0 : &lt;CFString 0x326dc838 [0x321be700]&gt;&#123;contents = \&quot;UITrackingRunLoopMode\&quot;&#125;\n\t1 : &lt;CFString 0x321a4cc8 [0x321be700]&gt;&#123;contents = \&quot;kCFRunLoopDefaultMode\&quot;&#125;\n&#125;\n,\ncommon mode items = &lt;CFBasicHash 0x14699410 [0x321be700]&gt;&#123;type = mutable set, count = 65,\nentries =&gt;\n\t0 : &lt;CFRunLoopSource 0x145addf0 [0x321be700]&gt;&#123;signalled = No, valid = Yes, order = -1, context = &lt;CFRunLoopSource context&gt;&#123;version = 0, info = 0x0, callout = &lt;redacted&gt; (0x2b3ce001)&#125;&#125;\n\t1 : &lt;CFRunLoopSource 0x1459f330 [0x321be700]&gt;&#123;signalled = No, valid = Yes, order = 0, context = &lt;CFRunLoopSource context&gt;&#123;version = 0, info = 0x0, callout = &lt;redacted&gt; (0x2a84fee9)&#125;&#125;\n\t2 : &lt;CFRunLoopSource 0x1464db60 [0x321be700]&gt;&#123;signalled = No, valid = Yes, order = 0, context = &lt;CFRunLoopSource context&gt;&#123;version = 0, info = 0x0, callout = ??? (0x2b74bb79)&#125;&#125;\n\t3 : &lt;CFRunLoopObserver 0x145a41f0 [0x321be700]&gt;&#123;valid = Yes, activities = 0xa0, repeats = Yes, order = 2147483647, callout = &lt;redacted&gt; (0x27577875), context = &lt;CFArray 0x145a4170 [0x321be700]&gt;&#123;type = mutable-small, count = 1, values = (\n\t0 : &lt;0x734028&gt;\n)&#125;&#125;\n\t4 : &lt;CFRunLoopSource 0x158dd350 [0x321be700]&gt;&#123;signalled = No, valid = Yes, order = 0, context = &lt;CFRunLoopSource MIG Server&gt; &#123;port = 103255, subsystem = 0x4b3f30, context = 0x0&#125;&#125;\n\t5 : &lt;CFRunLoopSource 0x146571f0 [0x321be700]&gt;&#123;signalled = No, valid = Yes, order = 0, context = &lt;CFMachPort 0x14657060 [0x321be700]&gt;&#123;valid = Yes, port = 8003, source = 0x146571f0, callout = &lt;redacted&gt; (0x25a979e1), context = &lt;CFMachPort context 0x0&gt;&#125;&#125;\n\t6 : &lt;CFRunLoopSource 0x146f38c0 [0x321be700]&gt;&#123;signalled = No, valid = Yes, order = 0, context = &lt;CFMachPort 0x146f91f0 [0x321be700]&gt;&#123;valid = Yes, port = 1331b, source = 0x146f38c0, callout = &lt;redacted&gt; (0x2beb16e9), context = &lt;CFMachPort context 0x158d4370&gt;&#125;&#125;\n\t7 : &lt;CFRunLoopTimer 0</div></pre></td></tr></table></figure></p>
<p>å°†åŸæ¥æ–¹æ³•æ›¿æ¢æ‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cy# original_NSRunLoop_description = NSRunLoop.prototype[&apos;description&apos;];</div><div class="line">(extern &quot;C&quot; id &quot;:description&quot;(id, SEL))</div><div class="line">cy# NSRunLoop.prototype[&apos;description&apos;] = function() &#123; return original_NSRunLoop_description.call(this).toString().substr(0,0) + &quot;This is a replaced description &quot;; &#125;</div><div class="line">function () &#123;var e;e=this;return original_NSRunLoop_description.call(e).toString().substr(0,0)+&quot;This is a replaced descripttion &quot;;&#125;</div></pre></td></tr></table></figure></p>
<p>åŸæ¥çš„ description æ–¹æ³•è¢«æ›¿æ¢ä¸ºæ–°çš„æè¿°å­—ç¬¦ä¸²ï¼Œå†æ‰§è¡Œæ–¹æ³•åˆ™ä¼šæœ‰å¦‚ä¸‹è¾“å‡ºã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cy# [NSRunLoop currentRunLoop]</div><div class="line">#&quot;This is a replaced descripttion &quot;</div></pre></td></tr></table></figure></p>
<ul>
<li>æ‰“å°è§†å›¾å±‚çº§å…³ç³»</li>
</ul>
<p>é€’å½’æ‰“å°è§†å›¾å±‚çº§å…³ç³»<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">cy# UIApp.keyWindow.recursiveDescription().toString()</div><div class="line">`&lt;_UIAlertControllerShimPresenterWindow: 0x182adce0; frame = (0 0; 320 568); opaque = NO; gestureRecognizers = &lt;NSArray: 0x1826d250&gt;; layer = &lt;UIWindowLayer: 0x18232af0&gt;&gt;</div><div class="line">   | &lt;UITransitionView: 0x180f3150; frame = (0 0; 320 568); clipsToBounds = YES; autoresize = H; layer = &lt;CALayer: 0x180c1650&gt;&gt;</div><div class="line">   |    | &lt;UIView: 0x16f292f0; frame = (0 0; 320 568); autoresize = W+H; layer = &lt;CALayer: 0x1816e2c0&gt;&gt;</div><div class="line">   |    | &lt;_UIAlertControllerView: 0x1816f9e0; frame = (0 0; 320 568); autoresize = W+H; layer = &lt;CALayer: 0x16f7bb90&gt;&gt;</div><div class="line">   |    |    | &lt;UIView: 0x16f17f90; frame = (0 0; 320 568); gestureRecognizers = &lt;NSArray: 0x181b9780&gt;; layer = &lt;CALayer: 0x16f12b80&gt;&gt;</div><div class="line">   |    |    | &lt;UIView: 0x182a6720; frame = (25 235; 270 98); animations = &#123; &lt;_UIParallaxMotionEffect: 0x16d2f520&gt;=&lt;CAAnimationGroup: 0x1821c430&gt;; &#125;; layer = &lt;CALayer: 0x182b02b0&gt;&gt;</div><div class="line">   |    |    |    | &lt;_UIDimmingKnockoutBackdropView: 0x16f36a30; frame = (0 0; 270 98); clipsToBounds = YES; layer = &lt;CALayer: 0x16f7aaf0&gt;&gt;</div><div class="line">   |    |    |    |    | &lt;UIView: 0x16f51130; frame = (0 0; 270 98); clipsToBounds = YES; layer = &lt;CALayer: 0x16fe2bd0&gt;&gt;</div><div class="line">   |    |    |    |    | &lt;_UIBackdropView: 0x181925f0; frame = (0 0; 270 98); clipsToBounds = YES; opaque = NO; autoresize = W+H; userInteractionEnabled = NO; layer = &lt;_UIBackdropViewLayer: 0x16f807e0&gt;&gt;</div><div class="line">   |    |    |    |    |    | &lt;_UIBackdropEffectView: 0x16f53e00; frame = (0 0; 270 98); clipsToBounds = YES; opaque = NO; autoresize = W+H; userInteractionEnabled = NO; layer = &lt;CABackdropLayer: 0x183447d0&gt;&gt;</div><div class="line">   |    |    |    |    |    | &lt;UIView: 0x16f1f450; frame = (0 0; 270 98); hidden = YES; opaque = NO; autoresize = W+H; userInteractionEnabled = NO; layer = &lt;CALayer: 0x183e9af0&gt;&gt;</div><div class="line">   |    |    |    | &lt;UIView: 0x16f58920; frame = (0 0; 270 98); layer = &lt;CALayer: 0x16f7bbc0&gt;&gt;</div><div class="line">   |    |    |    |    | &lt;UIView: 0x181766f0; frame = (0 0; 270 98); clipsToBounds = YES; layer = &lt;CALayer: 0x16d023f0&gt;&gt;</div><div class="line">   |    |    |    |    |    | &lt;_UIAlertControllerShadowedScrollView: 0x181f9940; frame = (0 0; 270 54); clipsToBounds = YES; gestureRecogni</div></pre></td></tr></table></figure></p>
<h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><ul>
<li><p>å­¦ä¹ çš„ç›®æ ‡è§„åˆ’<br>å¼€ç«¯ä¸¤ç¯‡æ–‡ç« ä¸»è¦å­¦ä¹ äº†å‡ ä¸ªå¸¸ç”¨å·¥å…·çš„ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯æ–¹æ³•è®ºã€‚ç„¶è€Œï¼Œåªæ‡‚å¾—ä½¿ç”¨å·¥å…·ï¼Œæ˜¯ä¸è¶³ä»¥å­¦ä¼šé€†å‘çš„ï¼Œæ‰€ä»¥åé¢å­¦ä¹ å®Œ IDA çš„ä½¿ç”¨ä¹‹åï¼Œå°±ä¼šæ•´ç†ä¸€ç¯‡ç†è®ºçš„æ–‡ç« ã€‚</p>
</li>
<li><p>class-dump<br>å¯¹äºæŸäº› Swift æ··ç¼–çš„é¡¹ç›®ï¼Œä¼šé€ æˆ crash çš„æŠ¥é”™ã€‚æ¯”å¦‚åœ¨å¯¹å¤©çŒ«åº”ç”¨è¿›è¡Œå¯¼å‡ºå¤´æ–‡ä»¶çš„æ—¶å€™ï¼Œå°±æŠ¥å¦‚ä¸‹é”™è¯¯ã€‚</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">âœ  Reverse class-dump Tmall4iPhone &gt; Tmall4iPhone.h</div><div class="line">2016-11-07 18:37:16.748 class-dump[6940:282221] Error: Cannot find offset for address 0x280000000103077b in stringAtAddress:</div></pre></td></tr></table></figure>
<p>å¯ä»¥ç»§ç»­å…³æ³¨åŸä½œè€…ä¼šå¦è¿›è¡Œé€‚é…ï¼Œæ¯•ç«Ÿ Swift æ˜¯å‘å±•çš„è¶‹åŠ¿ã€‚</p>
<ul>
<li>æ­£å‘å¼€å‘å’Œé€†å‘å¼€å‘çš„æ ¸å¿ƒ<br>ä»è¿™æ¬¡å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œé€†å‘å·¥ç¨‹å’Œæ­£å‘å·¥ç¨‹çš„åŒºåˆ«ï¼Œå°±æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ Mach-O æ–‡ä»¶è·å¾—æ–¹å¼çš„åŒºåˆ«ã€‚æ­£å‘å¼€å‘æ—¶ï¼Œæ˜¯å…ˆç¼–å†™ç¨‹åºï¼Œç„¶åç¼–è¯‘ã€é“¾æ¥ã€ç­¾åã€æ‰“åŒ…æœ€ç»ˆç”Ÿæˆå«æœ‰åº”ç”¨ Mach-O çš„åŒ…æ–‡ä»¶ã€‚è€Œé€†å‘å¼€å‘ï¼Œåˆ™æ˜¯ç›¸åï¼Œé¦–å…ˆæ˜¯è¦å…ˆè·å¾— Mach-O æ–‡ä»¶ï¼Œå†æ ¹æ®äºŒè¿›åˆ¶æ–‡ä»¶å¾—åˆ°ç›¸åº”çš„ä»£ç ï¼Œè¿›è¡Œåˆ†æï¼Œä¿®æ”¹ç­‰æ“ä½œã€‚</li>
</ul>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><p>Cycript çš„å¥‡æ·«æŠ€å·§<br><a href="http://iphonedevwiki.net/index.php/Cycript_Tricks" target="_blank" rel="external">http://iphonedevwiki.net/index.php/Cycript_Tricks</a></p>
</li>
<li><p>iOSå®‰å…¨â€“ä½¿ç”¨Cycriptè¿›è¡Œè¿è¡Œæ—¶åˆ†æ<br><a href="http://www.blogfshare.com/ioss-cycript.html" target="_blank" rel="external">http://www.blogfshare.com/ioss-cycript.html</a></p>
</li>
<li><p>å¿µèŒœå¥³ç¥çš„ Hack å®æˆ˜â€”â€”è§£é™¤æ”¯ä»˜å® App æ‰‹åŠ¿è§£é”é”™è¯¯æ¬¡æ•°é™åˆ¶<br><a href="http://wiki.jikexueyuan.com/project/ios-security-defense/hack-practice.html" target="_blank" rel="external">http://wiki.jikexueyuan.com/project/ios-security-defense/hack-practice.html</a></p>
</li>
<li><p>iOSé€†å‘å·¥ç¨‹(Cycriptè„šæœ¬è¯­è¨€ä½¿ç”¨ä¸å®æˆ˜)<br><a href="http://www.jianshu.com/p/7c41b03c9eb3" target="_blank" rel="external">http://www.jianshu.com/p/7c41b03c9eb3</a></p>
</li>
<li><p>Cycript ç®€ä»‹ä»¥åŠç»•è¿‡å±å¹•è§£é”å¯†ç <br><a href="http://security.ios-wiki.com/issue-4-5/" target="_blank" rel="external">http://security.ios-wiki.com/issue-4-5/</a> ï¼ˆè¿™ç¯‡æ–‡ç« çš„æ— å¯†ç è§£é”éƒ¨åˆ†å·²è¿‡æ—¶ï¼Œæ‰€ä»¥æ²¡æœ‰ä»‹ç»ã€‚é‡Œé¢çš„æ–¹æ³•å·²ç»åºŸé™¤ï¼Œå¯ä»¥é€šè¿‡å¯¼å‡ºå¤´æ–‡ä»¶æŸ¥çœ‹ï¼‰</p>
</li>
</ul>

    
  </div>
  
  <!-- æ ¹æ®é¡µé¢mathjaxå˜é‡å†³å®šæ˜¯å¦åŠ è½½MathJaxæ•°å­¦å…¬å¼js -->
  
</article>


   
  <div class="text-center donation">
    <div class="inner-donation">
      <span class="btn-donation">èµèµ</span>
      <div class="donation-body">
        <div class="tip text-center">æ„Ÿè°¢æ”¯æŒï½ ğŸ˜˜</div>
        <ul class="theme.donation.items.length">
        
          <li class="item">
            <img src="/images/qr-wechat.png" alt="">
          </li>
        
          <li class="item">
            <img src="/images/qr-alipay.png" alt="">
          </li>
        
        </ul>
      </div>
    </div>
  </div>


   
  <div class="box-prev-next clearfix">
    <a class="show pull-left" href="/2016/10/18/Learning-Kernel-From-Today-D1/">
        <i class="icon icon-angle-left"></i>
    </a>
    <a class="show pull-right" href="/2017/01/18/Learning-Reverse-From-Today-D3/">
        <i class="icon icon-angle-right"></i>
    </a>
  </div>




</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>





  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">å…³é—­</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/archives/"
              rel="noopener noreferrer"
              target="_self"
              >
              åšå®¢
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/category/"
              rel="noopener noreferrer"
              target="_self"
              >
              åˆ†ç±»
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/tag/"
              rel="noopener noreferrer"
              target="_self"
              >
              æ ‡ç­¾
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/about/"
              rel="noopener noreferrer"
              target="_self"
              >
              å…³äº
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    
	<!-- Gitmentè¯„è®ºæ’ä»¶é€šç”¨ä»£ç  -->
<div id="git"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
var gitment = new Gitment({
  owner: "niyaoyao",//githubç”¨æˆ·å
  repo: "niyaoyao.github.io",//ç”¨æˆ·å­˜å‚¨è¯„è®ºçš„githubé¡¹ç›®åç§°
  oauth: {
    client_id: "d0f3f608dd2342ad28e1",//æ³¨å†ŒOAuth Applicationæ—¶ç”Ÿäº§çš„ClinetID
    client_secret:"4aaf54736a3440ca4d3818ef6178ac156e33c8f7",//æ³¨å†ŒOAuth Applicationæ—¶ç”Ÿæˆçš„Client Secret
  },
})
gitment.render('git')
</script>
<!-- Gitmentä»£ç ç»“æŸ -->

  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</body>
</html>
